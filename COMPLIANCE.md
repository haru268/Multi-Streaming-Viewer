# 利用規約遵守ガイドライン

このドキュメントは、マルチ配信ビューアが各プラットフォーム（YouTube、Twitch、ツイキャス）の利用規約を遵守するための重要なガイドラインです。

**⚠️ 重要: この規約は絶対に守る必要があります。違反するとアプリケーションが使用できなくなる可能性があります。**

## 基本原則

### 1. 音声の自動同時再生は禁止

**理由:**
- 主要ブラウザは「ユーザー操作なしの自動再生」に厳しく、自動で音声を出すことを許可していない
- 各サービスのプレイヤーも、このブラウザ制限を前提に動いている
- 「ユーザー体験を妨げる方法での利用を禁止」という規約に抵触する可能性がある

**実装ルール:**
- ✅ **全枠ミュートで自動再生**: 新規追加されたストリームは必ずミュート状態で開始
- ✅ **ユーザー操作のみで音声ON**: 音声はユーザーが明示的にクリックした場合のみON
- ✅ **トグル式**: ユーザーがクリックした枠のみ音声ON、それ以外は必ずミュート状態

### 2. プレイヤーの改変は禁止

**禁止事項:**
- ❌ iframe内の要素を改変する行為
- ❌ プレイヤーの操作をAPIで認められた項目以外で制御
- ❌ 音声を強制的にONにする独自スクリプト
- ❌ 音量を強制的に上げる処理

**実装ルール:**
- ✅ 公式の埋め込みプレイヤーをそのまま使用
- ✅ APIで認められたパラメータのみ使用
- ✅ iframe内のDOM操作は一切行わない

### 3. 複数プレイヤーの同期再生・連動制御は禁止

**禁止事項:**
- ❌ 複数プレイヤーの同期再生
- ❌ APIの範囲を超える制御（音量、画質強制、UI強制変更）
- ❌ 複数プレイヤーを連動させて制御

**実装ルール:**
- ✅ 各プレイヤーは独立して動作
- ✅ APIの範囲内の制御のみ許可
- ✅ ユーザーが個別に操作する形のみ

### 4. 動画データの再配信・取得・変換は禁止

**禁止事項:**
- ❌ 映像を一度サーバーで取り直す行為（中継・ミラー）
- ❌ 動画データの再配信
- ❌ 動画データの取得・変換

**実装ルール:**
- ✅ iframe埋め込みのみ使用（問題なし）
- ✅ サーバー側での処理は一切行わない

### 5. 画質制御の強制は禁止

**禁止事項:**
- ❌ 画質を強制的に固定する行為
- ❌ プレイヤーの画質設定を強制変更

**実装ルール:**
- ✅ 画質はプレイヤー側で決定
- ✅ 画質パラメータは指定しない（デフォルト動作に任せる）

## プラットフォーム別の注意事項

### YouTube
- ✅ 埋め込みURL: `https://www.youtube.com/embed/{VIDEO_ID}?autoplay=1&mute=1`
- ✅ ミュート制御: `mute` パラメータで制御可能
- ❌ プレイヤーAPIの範囲外の操作は禁止

### Twitch
- ✅ 埋め込みURL: `https://player.twitch.tv/?channel={CHANNEL}&parent={HOSTNAME}&muted=true`
- ✅ ミュート制御: `muted` パラメータで制御可能
- ✅ `parent` パラメータは必須（セキュリティ要件）
- ❌ プレイヤーの改変は禁止

### ツイキャス
- ✅ 埋め込みURL: `https://twitcasting.tv/embedstream.php?u={USER_ID}`
- ⚠️ **注意**: 埋め込みパラメータでミュート制御ができない
- ✅ ユーザーがプレイヤー内で操作する必要がある
- ❌ 埋め込みコードの改変は禁止

## 実装チェックリスト

コードを変更する際は、以下を確認してください:

- [ ] 新規ストリームは必ず `isMuted: true` で作成されているか
- [ ] 埋め込みURLは常にミュートパラメータを含んでいるか（可能な場合）
- [ ] 音声ONはユーザーの明示的な操作のみで行われるか
- [ ] iframe内のDOM操作を行っていないか
- [ ] プレイヤーAPIの範囲外の操作を行っていないか
- [ ] 複数プレイヤーの同期再生を行っていないか
- [ ] サーバー側で動画データを処理していないか
- [ ] 画質を強制していないか

## コード内での規約遵守

重要な箇所には以下のコメントを追加してください:

```typescript
// 規約遵守: [具体的な理由]
```

例:
```typescript
isMuted: true, // 規約遵守: 初期状態は必ずミュート（自動音声再生禁止）
```

## 参考資料

- [YouTube Terms of Service](https://www.youtube.com/static?template=terms)
- [Twitch Terms of Service](https://www.twitch.tv/p/ja-jp/legal/terms-of-service/)
- [ツイキャス 利用規約](https://twitcasting.tv/terms.php)

---

**最終更新**: 2024年
**重要度**: 🔴 最高（絶対に守る必要がある）

